<!DOCTYPE html>

<!--
<html xmlns:th="https://www.thymeleaf.org" th:replace="~{fragments/layout :: layout (~{::body},'home')}">
--> 
<html>
  <head>
    <script src="https://pixijs.download/release/pixi.js"></script>
  </head>

  <body>

    <h1>PixiJS Test</h1>
    
	<script>
	  // pixijs application frame setup
	  const app = new PIXI.Application({
		  width: 640,
		  height: 360,
		  background: '#c0c0c0',
	  });
	  document.body.appendChild(app.view);
	  
	  // add a sprite to its stage
	  let sprite = PIXI.Sprite.from('resources/images/cancel.png'); // asynchronous load
	  app.stage.addChild(sprite);
	  
	  // hook into its ticker
	  let elapsed = 0.0;
	  app.ticker.add((delta) => {
		  elapsed += delta;
		  sprite.x = 100.0 + Math.cos(elapsed/50.0) * 100.0;
	  });
	  
	  // for drawing:
	  let isDrawing = false;
	  
	  // EventEmitter event scheme (https://github.com/primus/eventemitter3)
      app.stage.eventMode = 'static';
      app.stage.on('mousedown', (event) => { isDrawing = true; console.log('mousedown evt');});
      app.stage.on('mouseup', (event) => { isDrawing = false; console.log('mouseup evt'); });
      app.stage.on('mouseupoutside', (event) => { isDrawing = false; console.log('mouseupoutside evt'); });
      app.stage.on('mousemove', (event) => { if (isDrawing) {
          console.log('mousemove evt');
      }});
      
      // these events only seem to fire on the sprite, not just anywhere on the stage's bounds.
      // expect this to work once background image is added

//      // PixiJS event scheme
//      app.stage.onmousedown = (event) => { isDrawing = true; };
//      app.stage.onmouseup = (event) => { isDrawing = false; };
//      app.stage.onmouseupoutside = (event) => { isDrawing = false; };
//      app.stage.omousemove = (event) => { if (isDrawing) {
//          alert('hi');
//      }};
	</script>

  </body>

</html>